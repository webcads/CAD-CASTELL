{"version":3,"file":"metric.js","names":["Clock","Duration","constVoid","dual","identity","pipe","globalValue","HashSet","pipeArguments","ReadonlyArray","Cause","_effect","core","metricBoundaries","metricKey","metricLabel","metricRegistry","MetricSymbolKey","MetricTypeId","Symbol","for","metricVariance","_Type","_","_In","_Out","globalMetricRegistry","make","keyType","unsafeUpdate","unsafeValue","metric","Object","assign","effect","tap","a","sync","empty","arguments","mapInput","self","f","input","extraTags","counter","name","options","fromMetricKey","frequency","description","withConstantInput","key","hook","fullKey","taggedWithLabelSet","get","update","gauge","histogram","boundaries","increment","bigint","BigInt","incrementBy","amount","map","mapType","set","value","succeed","out","evaluate","summary","withNow","summaryTimestamp","tagged","taggedWithLabels","taggedWithLabelsInput","union","fromIterable","extraTagsIterable","isHashSet","extraTags1","timer","exponential","start","factor","count","base","toMillis","timerWithBoundaries","fromChunk","trackAll","matchCauseEffect","onFailure","cause","failCause","onSuccess","trackDefect","trackDefectWith","updater","defect","tapDefect","defects","forEach","trackDuration","trackDurationWith","clockWith","clock","startTime","unsafeCurrentTimeNanos","endTime","duration","nanos","trackError","trackErrorWith","error","tapError","trackSuccess","trackSuccessWith","fiberRefGetWith","currentMetricLabels","tags","Date","now","zip","that","l","r","unsafeSnapshot","snapshot"],"sources":["../../../src/internal/metric.ts"],"sourcesContent":[null],"mappings":"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"}